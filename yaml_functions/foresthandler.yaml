metadata:
  name: foresthandler
  labels:
    nuclio.io/project-name: ad88c3d7-3b6a-441f-a552-8eae1f689765
spec:
  handler: "main:handler"
  runtime: nodejs
  resources: {}
  image: "nuclio/processor-foresthandler:latest"
  minReplicas: 1
  maxReplicas: 1
  targetCPU: 75
  triggers:
    fireTrigger:
      class: ""
      kind: mqtt
      url: "192.168.1.184:1883"
      username: guest
      password: guest
      attributes:
        subscriptions:
          - qos: 0
            topic: forest/iot/sensors
  version: 1
  build:
    functionSourceCode: Y29uc3QgbXF0dCA9IHJlcXVpcmUoJ21xdHQnKQ0KY29uc3QgZm9yZXN0ID0gImZvcmVzdC9pb3QvYWxlcnQiDQpjb25zdCB1cmwgPSAnbXF0dDovLzE5Mi4xNjguMS4xODQnDQoNCmNvbnN0IG9wdGlvbnMgPSB7DQogICAgcG9ydDogMTg4MywNCiAgICBob3N0OiB1cmwsDQogICAgY2xpZW50SWQ6ICdmb3Jlc3RfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnN1YnN0cigyLCA4KSwNCiAgICB1c2VybmFtZTogJ2d1ZXN0JywNCiAgICBwYXNzd29yZDogJ2d1ZXN0JywNCn07DQoNCmZ1bmN0aW9uIHNlbmRGZWVkYmFja01xdHQocSxtc2cpew0KICAgIGNvbnN0IGNsaWVudCA9IG1xdHQuY29ubmVjdCh1cmwsIG9wdGlvbnMpOw0KICAgIGNsaWVudC5vbignY29ubmVjdCcsIGZ1bmN0aW9uKCkgew0KICAgICAgICBjbGllbnQucHVibGlzaChxLCBtc2cse3FvczoyfSxmdW5jdGlvbigpew0KICAgICAgICAgICAgY2xpZW50LmVuZCgpOw0KICAgICAgICB9KTsgICAgICAgICAgICAgDQogICAgfSk7ICAgICAgICANCn0NCg0KZXhwb3J0cy5oYW5kbGVyID0gZnVuY3Rpb24oY29udGV4dCwgZXZlbnQpIHsNCiAgICB2YXIgZm9yZXN0SnNvbiA9IEpTT04ucGFyc2UoZXZlbnQuYm9keSk7DQogICAgDQogICAgaWYgKGZvcmVzdEpzb24uc2Vuc29yID09ICJGSVJFX09OIikgew0KICAgICAgICBzZW5kRmVlZGJhY2tNcXR0KGZvcmVzdCwgZXZlbnQuYm9keSk7DQogICAgfQ0KDQogICAgY29udGV4dC5jYWxsYmFjaygiRkVFREJBQ0s6ICIrIGZvcmVzdEpzb24uc2Vuc29yKTsNCiAgICBjb25zb2xlLmxvZygiVFJJR0dFUiAiKyBmb3Jlc3RKc29uLnNlbnNvcik7DQp9Ow==
    commands:
      - 'npm install mqtt'
      - 'npm install amqplib'
    runtimeAttributes:
      repositories: []
    codeEntryType: sourceCode
  platform: {}
  readinessTimeoutSeconds: 60
